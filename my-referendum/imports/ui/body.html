<body>
  <header>
    <h1>My Referendum</h1>
    {{#if currentUser}}
        <span class='hidden' id='userID'>{{currentUser.services.facebook.id}}</span>
        <img class='avatar' src="http://graph.facebook.com/{{currentUser.services.facebook.id}}/picture"/>
    {{/if}}
  </header>
  {{#if currentUser}}
    <span class='hidden' id='hasVoted'>{{hasVoted}}</span>
    {{>user_info}}
    {{#if hasVoted}}
      {{>confirmation}}
    {{/if}}
    {{>warning}}
    {{>initial_question}}
    {{>age_validity}}  
    {{>location_validity}}
  {{else}}
    {{>login}}
  {{/if}}
  {{>footer}}
</body>
<template name="login">
    <div class='container'>
        <p class='question'>We want to create a space for 16-25-year-olds to have their say on the EU Referendum, separate from what is happening nationally.</p>
        <p>With our EU Referendum for Young People you have until June 16 to cast your vote. Once you've voted, you may change your vote at any time up until 16 June.</p>
        <p>Log in with Facebook below to begin voting, none of your personal information will be kept by us or given to anyone else. My Referendum is a project delivered by Youth Focus: North East and funded by the Ballinger Charitable Trust.</p>
        <button id="facebook-login" class="submit">Log in with Facebook</button>
    </div>
</template>

<template name="user_info">
    <div class="login-info">
        <span>Hello, {{currentUser.services.facebook.name}}!</span>
        <button id="logout" class="secondary-button">Not you?</button>
    </div>
    
</template>

<template name="initial_question">
  <div class="container" id='initialQuestion'>
    <p class='question'>"Should the United Kingdom remain a member of the European Union or leave the European Union?"</p>
    <form class="vote" id="voteForm">
      <div class="optionSelect {{#if votedStay}} selected {{/if}}" id="stay">
        <input id='voteStay' type="radio" name='voteOption' value='true'/><label for='voteStay'>Remain a member of the European Union</label>
      </div>
      <div class="optionSelect {{#if votedLeave}} selected {{/if}}" id="leave">
        <input id='voteLeave' type="radio" name='voteOption' value='true'/><label for='voteLeave'>Leave the European Union</label> 
      </div>
      
      <p class='hidden infoMessage' id='thanks'>Thanks for voting! If you'd like to change your vote, just select the option you'd like to change to above</p>
      <input type="submit" class='submit' value="Vote"/>
      
    </form>
  </div>
</template>

<template name="age_validity">
  <div id='validityAge' class='hidden container'>
    <p class='question'>Are you aged between 16 and 25?</p>
    <form class="vote" id="ageForm">
      <div class="optionSelect">
        <input id='ageYes' type="radio" name='voteOption' value='true'/><label for='ageYes'>Yes</label>
      </div>
      <div class="optionSelect">
        <input id='ageNo' type="radio" name='voteOption' value='true'/><label for='ageNo'>No</label> 
      </div>
      
      <input type="submit" class='submit' value="Confirm"/>
    </form>
  </div>
</template>

<template name="location_validity">
  <div id='validityLocation' class='hidden container'>
    <p class='question'>Are you currently living in the North East of England?</p>
    <form class="vote" id="locationForm">
      <div class="optionSelect">
        <input id='locationYes' type="radio" name='voteOption'/><label for='locationYes'>Yes</label>
      </div>
      <div class="optionSelect">
        <input id='locationNo' type="radio" name='voteOption'/><label for='locationNo'>No</label> 
      </div>
      
      <input type="submit" class='submit' value="Confirm"/>
    </form>
  </div>
</template>

<template name="confirmation">
  <div id='confirmation' class='container'>
    <p id='ageMessage' class='hidden'>Thanks for your interest in this issue, but we are only recording opinions of people aged 16 to 25 at this time. You can see the current results below</p>
    <div id='results'>
      {{> results}}
    </div>
  </div>
</template>

<template name="results">
  <h2>Votes so far</h2>
  <div id='stayResult'>
    <p>Votes to remain <span>{{votesToStay}}</span></p>
  </div>
  <div id='leaveResult'>
    <p>Votes to leave <span>{{votesToLeave}}</span></p>
  </div>
  <p id="voteAgainMessage">Thanks for voting. If you want to change your vote you can do so up until 16 June by voting again below.</p>
</template>

<template name="warning">
  <p class='hidden infoMessage warning'>Please select one of the options below</p>
</template>

<template name="footer">
    <footer>
        
    </footer>    
</template>
