<body>
  <header>
    <h1>My Referendum</h1>
    {{#if currentUser}}
        <span class='hidden' id='userID'>{{currentUser.services.facebook.id}}</span>
        <img class='avatar' src="http://graph.facebook.com/{{currentUser.services.facebook.id}}/picture"/>
    {{/if}}
  </header>
  {{#if currentUser}}
    <span class='hidden' id='hasVoted'>{{hasVoted}}</span>
    {{>user_info}}
    {{#if hasVoted}}
      {{>confirmation}}
    {{/if}}
    {{#if votedStay}}
      {{>voted_to_remain}}
    {{/if}}
    {{#if votedLeave}}
      {{>voted_to_leave}}
    {{/if}}
    {{>warning}}
    {{>initial_question}}
    {{>age_validity}}  
    {{>location_validity}}
  {{else}}
    {{>login}}
  {{/if}}
  {{>footer}}
</body>
<template name="login">
    <div class='container'>
        <p class='question'>We would like to get the views of 16&ndash;25 year-olds on whether the UK should remain a member of the European Union. There is a danger that the voices of young people are being overlooked.</p>
        <p>With our EU Referendum for Young People you have until 16 June to cast your vote on whether you would like the UK to remain or leave.</p>
        <p>Log in with Facebook below to begin voting. None of your personal information will be kept by us or given to anyone else.</p>
        <p>Results will be released on 24 June on <a href='www.mymanifesto.org.uk' target='_blank'>mymanifesto.org.uk</a></p>
        <button id="facebook-login" class="submit">Log in with Facebook</button>
    </div>
</template>

<template name="user_info">
    <div class="login-info">
        <span>Hello, {{currentUser.services.facebook.name}}!</span>
        <button id="logout" class="secondary-button">Not you?</button>
    </div>
    
</template>

<template name="initial_question">
  <div class="container" id='initialQuestion'>
    <p class='question'>"Should the United Kingdom remain a member of the European Union or leave the European Union?"</p>
    <form class="vote" id="voteForm">
      <div class="optionSelect" id="stay">
        <input id='voteStay' type="radio" name='voteOption' value='true'/><label for='voteStay'>Remain a member of the European Union</label>
      </div>
      <div class="optionSelect" id="leave">
        <input id='voteLeave' type="radio" name='voteOption' value='true'/><label for='voteLeave'>Leave the European Union</label> 
      </div>
      
      <p class='hidden infoMessage' id='thanks'>Thanks for voting! If you'd like to change your vote, just select the option you'd like to change to above</p>
      <input type="submit" class='submit' value="Vote"/>
      
    </form>
  </div>
</template>

<template name="age_validity">
  <div id='validityAge' class='hidden container'>
    <p class='question'>Are you aged between 16 and 25?</p>
    <form class="vote" id="ageForm">
      <div class="optionSelect">
        <input id='ageYes' type="radio" name='voteOption' value='true'/><label for='ageYes'>Yes</label>
      </div>
      <div class="optionSelect">
        <input id='ageNo' type="radio" name='voteOption' value='true'/><label for='ageNo'>No</label> 
      </div>
      
      <input type="submit" class='submit' value="Confirm"/>
    </form>
  </div>
</template>

<template name="location_validity">
  <div id='validityLocation' class='hidden container'>
    <p class='question'>Are you currently living in the North East of England?</p>
    <form class="vote" id="locationForm">
      <div class="optionSelect">
        <input id='locationYes' type="radio" name='voteOption'/><label for='locationYes'>Yes</label>
      </div>
      <div class="optionSelect">
        <input id='locationNo' type="radio" name='voteOption'/><label for='locationNo'>No</label> 
      </div>
      
      <input type="submit" class='submit' value="Confirm"/>
    </form>
  </div>
</template>

<template name="confirmation">
  <div id='confirmation' class='container'>
    <div id='results'>
      {{> results}}
    </div>
  </div>
</template>

<template name="results">
  <h2>Votes so far</h2>
  <p>{{totalVotes}}</p>
  <p id="voteAgainMessage">Thanks for voting. If you want to change your vote you can do so up until 16 June by voting again below.</p>
  <a href='http://www.facebook.com/sharer/sharer.php?&u=http://myreferendum.org.uk/' class='fbLink' target='_blank'>Share on Facebook</a>
</template>

<template name="voted_to_remain">
  <p>Your current vote: 'Remain a member of the European Union'</p>
</template>

<template name="voted_to_leave">
  <p>Your current vote: 'Leave the European Union'</p>    
</template>

<template name="warning">
  <p class='hidden infoMessage warning'>Please select one of the options below</p>
</template>

<template name="footer">
    <footer>
        <p><a href='http://mymanifesto.org.uk/2016/05/the-eu-referendum-what-do-you-need-to-know/'>Learn More</a></p>
        <a href='http://youthfocusne.org.uk/' target='_blank'>
        <svg version="1.1" id="YFLogo" class='footerLogo' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="500px" height="500px" viewBox="100 100 300 300" enable-background="new 0 0 500 500" xml:space="preserve">
            <g>
                <path fill="#F39200" d="M262.277,245.456v-56.288h-16.958v30.485c0,1.041,0.312,5.098-1.977,8.219
                    c-2.289,3.226-6.034,3.642-7.283,3.642c-3.953,0-6.971-2.393-7.803-6.243c-0.312-0.936-0.416-2.081-0.416-4.266v-31.838h-16.856
                    v20.324c-1.663-5.923-5.159-11.262-10.037-15.121c-5.202-3.954-11.653-6.347-18.104-6.347c-3.954,0-13.837,1.04-21.537,9.468
                    c-0.555,0.602-1.081,1.231-1.583,1.879L172.635,172h-19.457l-7.491,17.792c-1.353,3.121-2.705,6.347-3.954,9.572
                    c-0.729-2.081-1.561-4.266-2.393-6.347L130.601,172H110l22.058,46.404v27.051h18.832v-27.364l3.317-7.031
                    c-0.458,2.031-0.705,4.11-0.705,6.199c0,10.82,5.931,18.104,8.532,20.705c7.699,7.699,17.063,8.635,20.705,8.635
                    c4.162,0,14.878-1.249,22.578-10.716c3.183-3.787,4.882-7.8,5.784-11.24c0.162,3.001,0.507,5.065,1.132,7.078
                    c1.873,6.555,6.763,11.861,13.422,13.838c2.809,0.833,4.994,0.833,6.138,0.833c7.804,0,11.237-3.538,13.63-6.035l0.104,5.098
                    H262.277L262.277,245.456z M195.537,217.26c0,6.867-5.619,12.589-12.589,12.589c-4.682,0-7.804-2.601-8.948-3.642
                    c-3.225-3.33-3.642-7.387-3.642-8.844c0-6.971,5.515-12.693,12.485-12.693C189.71,204.67,195.433,210.185,195.537,217.26
                    L195.537,217.26z"/>
                <path fill="#FCCB8D" d="M357.997,197.803c-1.872-3.225-6.763-9.78-17.063-9.78c-4.058,0-8.219,1.145-11.445,3.642
                    c-1.248,0.937-2.288,2.081-2.601,2.393V172h-16.854v73.456h16.854v-32.358c0.104-1.561,0.104-2.705,0.624-4.266
                    c1.249-3.642,4.994-5.931,8.636-5.931c2.602,0,4.162,1.041,4.994,1.665c3.435,2.601,3.121,6.763,3.227,8.011v32.878h16.854v-28.82
                    C361.223,209.977,361.327,203.734,357.997,197.803L357.997,197.803z M237.305,278.589c0-7.075,5.306-10.404,7.491-11.237
                    c2.289-1.04,4.266-1.144,5.202-1.144c4.578,0,7.387,2.185,8.531,3.329c0.729,0.729,1.456,1.769,1.561,1.977h18.208
                    c-1.353-4.578-2.186-6.243-3.537-8.324c-5.307-8.635-14.775-13.733-24.763-13.733c-12.589,0-23.41,7.803-27.676,19.144
                    c-0.018,0.05-0.038,0.11-0.058,0.166c-1.855-5.014-5.053-9.499-9.301-12.859c-5.203-3.954-11.653-6.347-18.104-6.347
                    c-3.953,0-13.838,1.04-21.537,9.468c-0.235,0.255-0.46,0.518-0.686,0.78v-9.207h-7.179v-1.457c0-1.041-0.104-4.891,3.85-5.723
                    c0.729-0.208,1.665-0.208,3.33-0.104v-11.341c-10.3-0.312-15.295,0.729-19.144,4.682c-4.37,4.474-4.37,9.78-4.474,11.133v2.81
                    h-6.451v13.213h6.243v43.179h16.647v-43.179h4.295c-2.7,4.493-4.233,9.708-4.233,14.982c0,10.821,5.931,18.104,8.532,20.705
                    c7.699,7.699,17.063,8.636,20.705,8.636c4.162,0,14.878-1.249,22.578-10.717c2.442-2.906,4.005-5.944,5.013-8.757
                    c2.705,7.382,8.333,13.705,15.895,16.977c4.994,2.186,9.468,2.393,11.549,2.393c14.565,0,22.474-9.571,25.075-13.733
                    c1.977-3.33,3.328-7.907,3.536-8.74h-17.895c-1.354,1.873-4.058,5.827-10.405,5.827
                    C242.923,291.387,237.305,285.872,237.305,278.589L237.305,278.589z M207.552,278.797c0,6.867-5.619,12.59-12.589,12.59
                    c-4.682,0-7.803-2.601-8.948-3.642c-3.225-3.329-3.641-7.388-3.641-8.845c0-6.971,5.514-12.692,12.485-12.692
                    C201.726,266.208,207.448,271.722,207.552,278.797L207.552,278.797z"/>
                <path fill="#6F4F9B" d="M284.922,320.749c-0.59-0.886-1.159-1.771-1.771-2.654c-1.284-1.938-2.568-3.75-3.833-5.54h-3.307v14.871
                    h3.707v-8.131l5.603,8.131h3.328v-14.871h-3.728V320.749L284.922,320.749z M293.523,323.528c-0.652-0.674-0.736-1.495-0.736-1.79
                    c0-1.411,1.116-2.569,2.527-2.569c1.391,0,2.549,1.116,2.57,2.549c0,1.39-1.138,2.548-2.549,2.548
                    C294.388,324.266,293.756,323.739,293.523,323.528L293.523,323.528z M291.102,325.91c1.56,1.558,3.455,1.748,4.192,1.748
                    c0.842,0,3.012-0.254,4.571-2.171c1.222-1.452,1.368-3.074,1.368-3.749c0-1.812-0.843-3.539-2.254-4.655
                    c-1.053-0.801-2.358-1.284-3.665-1.284c-0.801,0-2.802,0.21-4.359,1.916c-0.991,1.075-1.58,2.527-1.58,4.003
                    C289.375,323.908,290.575,325.383,291.102,325.91L291.102,325.91z M301.742,316.071v11.354h3.433v-6.34
                    c0.021-0.569,0.084-0.801,0.253-1.054c0.526-0.801,1.875-0.843,1.98-0.843c0.273-0.021,0.483,0.021,0.716,0.042v-3.202
                    c-0.442,0-1.58-0.084-2.591,0.928c-0.274,0.273-0.526,0.61-0.591,0.694v-1.58H301.742L301.742,316.071z M309.637,312.555v3.454
                    h-1.264v2.654h1.221v8.763h3.455v-8.742h1.475v-2.654h-1.454v-3.475H309.637L309.637,312.555z M314.852,312.555v14.871h3.412
                    v-6.551c0.021-0.316,0.021-0.548,0.127-0.864c0.252-0.737,1.011-1.2,1.748-1.2c0.527,0,0.843,0.21,1.011,0.337
                    c0.695,0.526,0.632,1.369,0.653,1.622v6.656h3.413v-5.835c0-1.349,0.021-2.612-0.653-3.812c-0.38-0.652-1.37-1.979-3.455-1.979
                    c-0.821,0-1.664,0.23-2.316,0.737c-0.253,0.188-0.463,0.421-0.527,0.483v-4.465H314.852L314.852,312.555z M340.508,312.555h-8.447
                    v14.871h8.489v-3.391H336v-2.444h4.508v-3.496h-4.529v-2.233h4.529V312.555L340.508,312.555z M349.376,316.746
                    c-0.463-0.316-1.349-0.927-2.823-0.927c-1.706,0-3.265,0.843-4.297,2.19c-1.116,1.517-1.243,3.055-1.243,3.729
                    c0,2.443,1.349,3.96,2.002,4.551c1.327,1.221,2.633,1.369,3.349,1.369c1.686,0,2.592-0.737,3.139-1.139v0.906h3.308v-11.375h-3.434
                    V316.746L349.376,316.746z M345.184,323.57c-0.505-0.483-0.779-1.137-0.779-1.811c0-1.412,1.158-2.591,2.57-2.591
                    c1.432,0,2.57,1.158,2.591,2.569c0,1.433-1.138,2.57-2.569,2.592C346.321,324.33,345.647,324.035,345.184,323.57L345.184,323.57z
                    M362.106,319.4c-0.021-0.169-0.021-0.61-0.188-1.096c-0.316-0.969-1.349-2.464-3.897-2.464c-1.58,0-3.223,0.695-3.98,2.169
                    c-0.169,0.295-0.38,0.801-0.38,1.622c0,0.422,0.043,1.412,0.885,2.254c0.464,0.443,1.053,0.78,2.358,1.117
                    c0.906,0.23,1.412,0.295,1.729,0.674c0.146,0.21,0.188,0.442,0.188,0.547c0,0.253-0.188,0.885-0.947,0.906
                    c-0.084,0-0.316-0.021-0.526-0.147c-0.485-0.253-0.506-0.801-0.548-0.969h-3.455c0.043,0.252,0.085,0.863,0.422,1.495
                    c0.21,0.422,0.547,0.801,0.906,1.096c0.547,0.463,1.516,1.074,3.201,1.074c1.979,0,3.117-0.864,3.644-1.454
                    c0.864-0.926,0.927-1.853,0.927-2.38c0-1.032-0.357-1.875-1.221-2.485c-0.759-0.568-1.475-0.737-2.36-0.947
                    c-0.674-0.19-1.115-0.316-1.368-0.485c-0.232-0.168-0.379-0.421-0.379-0.737c0-0.463,0.337-0.863,0.821-0.863
                    c0.147,0,0.315,0.041,0.442,0.127c0.357,0.21,0.421,0.547,0.463,0.947H362.106L362.106,319.4z M363.321,312.555v3.454h-1.263v2.654
                    h1.221v8.763h3.455v-8.742h1.475v-2.654h-1.453v-3.475H363.321L363.321,312.555z"/>
                <polygon fill="#6F4F9B" points="313.205,208.832 293.607,208.796 293.645,189.167 276.477,189.167 276.477,208.764 
                    256.917,208.728 256.917,225.896 276.477,225.896 276.477,245.456 293.541,245.456 293.577,225.896 313.205,225.896 
                    313.205,208.832 	"/>
                <path fill="#F39200" d="M388.996,306.993v-17.271h-17.167v17.271H388.996L388.996,306.993z M371.829,280.565h17.167v-17.479
                    h-17.167V280.565L371.829,280.565z M343.21,266.312c0-2.289,1.664-4.266,4.057-4.266c0.729,0,1.562,0.208,2.186,0.624
                    c1.769,1.041,2.081,2.705,2.289,4.682h16.127c-0.104-0.832-0.104-3.017-0.937-5.41c-1.561-4.786-6.659-12.173-19.249-12.173
                    c-7.803,0-15.918,3.434-19.664,10.716c-0.23,0.404-0.477,0.893-0.713,1.468v-11.247h-16.96v30.484c0,1.041,0.312,5.099-1.977,8.221
                    c-2.289,3.225-6.034,3.641-7.283,3.641c-3.953,0-6.971-2.393-7.803-6.242c-0.312-0.937-0.416-2.081-0.416-4.266v-31.838h-16.855
                    v30.173c0,6.243,0.312,9.364,1.248,12.381c1.873,6.555,6.763,11.862,13.422,13.838c2.81,0.833,4.994,0.833,6.138,0.833
                    c7.805,0,11.237-3.538,13.631-6.035l0.104,5.099h16.752v-8.348c1.022,1.631,2.39,3.101,3.834,4.29
                    c2.705,2.289,7.492,5.307,15.815,5.307c9.779,0,15.398-4.267,18-7.18c4.266-4.578,4.578-9.156,4.578-11.757
                    c0-5.098-1.77-9.26-6.035-12.278c-3.745-2.809-7.283-3.641-11.653-4.682c-3.329-0.936-5.514-1.56-6.763-2.393
                    C343.938,269.121,343.21,267.873,343.21,266.312L343.21,266.312z M350.701,288.473c0.728,1.041,0.936,2.186,0.936,2.706
                    c0,1.248-0.936,4.369-4.682,4.473c-0.416,0-1.562-0.104-2.602-0.728c-2.393-1.248-2.497-3.954-2.705-4.786h-14.343v-15.309
                    c0.646,1.579,1.65,3.24,3.21,4.801c2.289,2.185,5.202,3.849,11.653,5.514C346.643,286.288,349.14,286.601,350.701,288.473
                    L350.701,288.473z"/>
            </g>
          </svg>
        </a>
        <a href='http://www.ballingercharitabletrust.org.uk/' target='_blank'>
          <img src='/images/ballinger.jpg' class='footerLogo'/>    
        </a>
        <p>This work is not funded by any remain or leave parties or campaigns.</p>
    </footer>    
</template>
